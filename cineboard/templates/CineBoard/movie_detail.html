
{% block content %}

<h1>{{ movie.title }}</h1>
<p><strong>Жанр:</strong> {{ movie.genre }}</p>
<p><strong>Дата выхода:</strong> {{ movie.release_date }}</p>
<p><strong>Рейтинг:</strong> {{ movie.rating }}</p>
<p>{{ movie.description }}</p>
<p><strong>Теги:</strong> {{ movie.tags }}</p>

<hr>

<h2>Комментарии</h2>
<ul>
    {% for comment in movie.comments.all %}
        <li>
            <strong>{{ comment.user.username }}</strong> ({{ comment.created_at }}):<br>
            {{ comment.content }}
        </li>
    {% empty %}
        <li>Пока нет комментариев.</li>
    {% endfor %}
</ul>

{% if user.is_authenticated %}
<h3>Добавить комментарий</h3>
<form method="post" action="{% url 'add_comment' movie.pk %}">
    {% csrf_token %}
    {{ comment_form.as_p }}
    <button type="submit">Отправить</button>
</form>
{% else %}
<p>Только авторизованные пользователи могут оставлять комментарии. <a href="{% url 'login' %}">Войти</a></p>
{% endif %}

<hr>
<a href="{% url 'movie_edit' movie.pk %}">Редактировать фильм</a> |
<a href="{% url 'movie_delete' movie.pk %}">Удалить фильм</a> |
<a href="{% url 'movie_list' %}">Вернуться к списку фильмов</a>

{% endblock %}
